## 해시 테이블

- **해시 함수**를 사용하여 변환한 값을 색인(index)로 삼아 키(key)와 데이터(value)를 저장하는 자료구조
- 데이터를 효율적으로 저장하고 **검색**하기 위해 사용

- 원리
    - 키를 해시 함수를 통해 해시값으로 변환하고 이 해시값을 인덱스로 사용하여 데이터를 저장하거나 검색
    - 데이터 검색이 매우 빠르게 이루어짐!!!

### 해시 (Hash)

- 임의의 크기를 가진 데이터를 고정된 크기의 고유한 값으로 변환하는 것
- 이렇게 생성된 고유한 값은 주로 해당 데이터를 식별하는데 사용될 수 있음
    - 일종의 ‘지문’과 같은 역할
    - 데이터를 고유하게 식별
- 파이썬에서는 해시 함수를 사용하여 데이터를 해시 값으로 변환하며, 이 해시값은 정수로 표현됨

### 해시 함수

- 임의의 길이의 데이터를 입력받아 고정된 길이의 데이터(해시 값)을 출력하는 함수
- 주로 해시 테이블 자료구조에 사용되며, 매우 빠른 데이터 검색을 위한 컴퓨터 소프트웨어에서 유용하게 사용

### set의 요소 & dictionary의 키와 해시테이블 관계

- 세트의 요소와 딕셔너리의 키는 해시 테이블을 이용하여 중복되지 않는 고유한 값을 저장함
    - 순서는 중요하지 않음
- 세트 내의 각 요소는 해시 함수를 통해 해시값으로 변환되고, 이 해시값을 기반으로 해시 테이블에 저장됨
- 마찬가지로 딕셔너리의 키는 고유해야 하므로, 키를 해시 함수를 통해 해시 값으로 변환하여 해시 테이블에 저장
    - 따라서 딕셔너리의 키는 매우 빠른 탐색 속도를 제공하며, 중복된 값을 허용하지 않음

- set의 pop 메서드 예시 - 정수
    - 정수값 자체가 곧 해시값
        
        ```python
        my_set = {3, 2, 1, 9, 100, 4, 87, 39, 10, 52}
        
        print(my_set.pop())
        print(my_set.pop())
        print(my_set.pop())
        print(my_set.pop())
        print(my_set.pop())
        print(my_set.pop())
        print(my_set.pop())
        print(my_set.pop())
        print(my_set.pop())
        print(my_set.pop())
        print(my_set)
        
        '''
        52
        10
        39
        87
        4
        100
        9
        1
        2
        3
        set()
        '''
        ```
        
        - 실행할 때 마다 바뀌지 않음!!!
        - pop해서 프린트 되는 순서는 해시 테이블에 나열된 순서임!!!!!
- set의 pop 메서드 예시 - 문자열
    - 반환값이 매번 다름

- 해시 함수는
    - 해시 함수의 동작 방식은 객체의 타입에 따라 달라짐
    - 정수와 문자열은 서로 다른 타입이며, 이들의 해시 값을 계산하는 방식도 다름

### 해시함수 - 정수

- 같은 정수는 항상 같은 해시 값을 가짐
- 해시 테이블에 정수를 저장할 때 효율적인 방법
- 예를 들어, hash(1)과 hash(2)는 항상 서로 다른 해시 값을 갖지만, hash(1)은 항상 동일한 해시 값을 갖게 됨

### 해시함수 - 문자열

- 문자열은 가변적인 길이를 갖고 있고, 문자열에 포함된 각 문자들의 유니코드 코드 포인트 등을 기반으로 해시 값을 계산
- 이로인해 문자열의 해시값은 실행시마다 다르게 계산됨

### set의 pop 메서드의 결과와 해시 테이블의 관계

- pop 메서드는 set에서 임의의 요소를 제거하고 반환
- 실행할 때마다 다른 요소를 얻는다는 의미에서의 ‘무작위’(random)가 아니라 **‘임의’**라는 의미에서 ‘무작위’
    
    → 해시 테이블에 나타나는 순서대로 반환하는 것
    

### hashable

- hash() 함수의 인자로 전달해서 결과를 반환 받을 수 있는 객체를 hashable이라 함
- 대부분의 불변형 데이터 타입은 hashable
- 단 튜플의 경우 불변형이지만 해시 불가능한 객체를 참조할 때는 튜플 자체도 해시 불가능해지는 경우가 있음
    
    ```python
    print(hash(1))
    print(hash(1.0))
    print(hash('1'))
    print(hash((1, 2, 3)))
    
    # TypeError: unhashable type: 'list'
    print(hash((1, 2, [3, 4])))
    ```
    
- 해시 테이블의 키는 불변해야함
- 불변 객체는 해시 값이 변하지 않으므로 동일한 값에 대해 일관된 해시 값을 유지 할 수 있음
- **hash 가능하다 ≠ 불변하다**

- 가변이 hashable 하지 않은 이유
    - 값이 변경될 수 있기 때문에 동일한 객체에 대한 해시값이 변결될 가능성이 있음
        - 해시 테이블의 무결성 유지 불가
    - 가변형 객체가 변경되면 해시 값이 변경되기 때문에, 같은 객체에 대한 서로 다른 해시 값이 반환될 수 있음
        - 해시 값의 일관성 유지 불가

- hashable 객체가 필요한 이유
    1. 해시 테이블 기반 자료구조 사용
        - set과 dict의 키
        - 중복값 방지
        - 빠른 검색과 조회
    2. 불변성을 통한 일관된 해시 값
    3. 안정성과 예측 가능성 유지